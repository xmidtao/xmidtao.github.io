"use strict";(self.webpackChunkagile_docs=self.webpackChunkagile_docs||[]).push([[9186],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return E}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),c=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(i.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},N=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),N=c(t),E=r,_=N["".concat(i,".").concat(E)]||N[E]||d[E]||l;return t?a.createElement(_,o(o({ref:n},p),{},{components:t})):a.createElement(_,o({ref:n},p))}));function E(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=N;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<l;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}N.displayName="MDXCreateElement"},7023:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return i},metadata:function(){return c},toc:function(){return p},default:function(){return N}});var a=t(3117),r=t(102),l=(t(7294),t(3905)),o=["components"],s={id:"installation",title:"\u5b89\u88c5",sidebar_label:"\u5b89\u88c5",slug:"/mysql/basic/installation"},i=void 0,c={unversionedId:"mysql/basic/installation",id:"mysql/basic/installation",title:"\u5b89\u88c5",description:"\u56e0\u4e2a\u4eba MacBook Pro \u662f\u8001\u6b3e\uff0c\u5185\u5b58\u8f83\u5c0f\uff0c\u5c1d\u8bd5\u8fc7 Docker CentOS \u7f16\u8bd1\u5230 80% \u591a\u5c31\u5361\u4e3b\u88ab\u6740\u6b7b\uff0c\u56e0\u4e3a\u8d44\u6e90\u95ee\u9898\uff0c\u6545\u76f4\u63a5\u5728 Mac \u672c\u5730\u8fdb\u884c\u73af\u5883\u642d\u5efa\u3002",source:"@site/docs/mysql/basic/Installation.md",sourceDirName:"mysql/basic",slug:"/mysql/basic/installation",permalink:"/docs/mysql/basic/installation",editUrl:"https://github.com/xmidtao/documentation/tree/main/docs/mysql/basic/Installation.md",tags:[],version:"current",lastUpdatedAt:1690680973,formattedLastUpdatedAt:"7/30/2023",frontMatter:{id:"installation",title:"\u5b89\u88c5",sidebar_label:"\u5b89\u88c5",slug:"/mysql/basic/installation"},sidebar:"docs",previous:{title:"\u4ecb\u7ecd",permalink:"/docs/mysql"},next:{title:"React",permalink:"/docs/mysql/react"}},p=[{value:"\u23f3 \u7f16\u8bd1\u5b89\u88c5",id:"-\u7f16\u8bd1\u5b89\u88c5",children:[],level:2},{value:"\ud83d\udc7e MySQL \u670d\u52a1",id:"-mysql-\u670d\u52a1",children:[],level:2},{value:"\ud83e\udd13 TPCH",id:"-tpch",children:[],level:2},{value:"\ud83d\udc1e GDB/LLDB \u8c03\u8bd5",id:"-gdblldb-\u8c03\u8bd5",children:[],level:2},{value:"\ud83d\udc1e Trace \u6587\u4ef6\u8c03\u8bd5",id:"-trace-\u6587\u4ef6\u8c03\u8bd5",children:[],level:2},{value:"\ud83d\udcc1 \u6817\u5b50",id:"-\u6817\u5b50",children:[{value:"In \u67e5\u8be2",id:"in-\u67e5\u8be2",children:[],level:3},{value:"<code>=Any</code> \u67e5\u8be2",id:"any-\u67e5\u8be2",children:[],level:3},{value:"Exists \u67e5\u8be2",id:"exists-\u67e5\u8be2",children:[],level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",children:[],level:3}],level:2},{value:"\ud83d\udcc4 \u53c2\u8003",id:"-\u53c2\u8003",children:[],level:2}],d={toc:p};function N(e){var n=e.components,t=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"\u56e0\u4e2a\u4eba MacBook Pro \u662f\u8001\u6b3e\uff0c\u5185\u5b58\u8f83\u5c0f\uff0c\u5c1d\u8bd5\u8fc7 Docker CentOS \u7f16\u8bd1\u5230 80% \u591a\u5c31\u5361\u4e3b\u88ab\u6740\u6b7b\uff0c\u56e0\u4e3a\u8d44\u6e90\u95ee\u9898\uff0c\u6545\u76f4\u63a5\u5728 Mac \u672c\u5730\u8fdb\u884c\u73af\u5883\u642d\u5efa\u3002"),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},"\u2139\ufe0f"),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"MacBook Pro \u5feb\u5341\u5e74\u4e86\uff0c\u5185\u5b58\u8f83\u5c0f\uff0cCPU \u4e5f\u4e0d\u884c\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u6570\u5c0f\u65f6\uff0cDocker \u76f4\u63a5\u65e0\u6cd5\u7f16\u8bd1\u6210\u529f\uff0c\u4f1a\u88ab killed\u3002"),(0,l.kt)("p",{parentName:"div"},"\u5efa\u8bae\u6709\u6761\u4ef6\u540c\u5b66\uff0c\u51c6\u5907\u9ad8\u914d\u4e00\u70b9\u7684\u7b14\u8bb0\u672c\u7535\u8111\u6216\u53f0\u5f0f\u673a\uff0c\u4e00\u822c\u9996\u9009\u9ad8\u914d MacBook Pro \u6216\u7ec4\u88c5\u9ad8\u914d\u53f0\u5f0f\u673a\u4e5f\u53ef\uff0c\u9009\u4e00\u4e2a Linux/Unix \u64cd\u4f5c\u7cfb\u7edf\u914d\u5408\u98df\u7528\u3002"))),(0,l.kt)("h2",{id:"-\u7f16\u8bd1\u5b89\u88c5"},"\u23f3 \u7f16\u8bd1\u5b89\u88c5"),(0,l.kt)("p",null,"\u64cd\u4f5c\u7cfb\u7edf\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"Macos12.6 on x86_64")),(0,l.kt)("p",null,"\u786c\u4ef6\u73af\u5883\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Processor Name: Dual-Core Intel Core i5\nProcessor Speed:  2.9 GHz\nNumber of Processors: 1\nTotal Number of Cores:    2\nL2 Cache (per Core):  256 KB\nL3 Cache: 3 MB\nMemory:   8 GB\n")),(0,l.kt)("p",null,"\u4e3b\u8981\u662f\u589e\u52a0\u4e24\u4e2a\u53c2\u6570 -DWITH_DEBUG=1 \u548c -DCMAKE_BUILD_TYPE=Debug\u3002\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5373\u53ef\u5f97\u5230\u5305\u542bdebug\u529f\u80fd\u7684 MySQL \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u68c0\u67e5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cmake .. \\\n-DCMAKE_INSTALL_PREFIX=~/local/dev/mysql \\\n-DDOWNLOAD_BOOST=ON \\\n-DWITH_BOOST=~/local/dev/mysql/boost \\\n-DWITH_DEBUG=1 \\\n-DCMAKE_BUILD_TYPE=Debug\n\nmake -j8 VERBOSE=1 \n\nmake install\n")),(0,l.kt)("h2",{id:"-mysql-\u670d\u52a1"},"\ud83d\udc7e MySQL \u670d\u52a1"),(0,l.kt)("p",null,"\u5982\u4e0b\uff0c\u5728 Mac \u672c\u5730\u521d\u59cb\u5316\u4e00\u4e9b\u5b58\u50a8\u8def\u5f84\uff0c\u65e5\u5fd7\u8def\u5f84\u7b49\uff0c\u52a0\u5165\u73af\u5883\u53d8\u91cf\u65b9\u4fbf\u64cd\u4f5c\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"MySQL \u521d\u59cb\u5316")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo ln -s ~/local/dev/mysql /usr/local/mysql\necho 'export PATH=/usr/local/mysql/bin:$PATH' >> ~/.zshrc\necho 'export MANPATH=/usr/local/mysql/man:$MANPATH' >> ~/.zshrc\n\nsource ~/.zshrc\n\nmkdir -p ~/local/dev/mysql/data\n\nmysqld --initialize --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data\n\n[Note] [MY-010454] [Server] A temporary password is generated for root@localhost: Md6+l2E?,U#)\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"MYSQL \u7248\u672c")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"bin/mysqld --verbose --version\n\n/usr/local/mysql/bin/mysqld  Ver 8.1.0-debug for macos12.6 on x86_64 (Source distribution)\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u542f\u52a8 MYSQL")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"mysqld_safe --datadir=/usr/local/mysql/data --log-error=/usr/local/mysql/log/mysql.log &\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u767b\u5f55 MySQL\uff0c\u4fee\u6539 root \u5bc6\u7801\uff0c\u521d\u59cb\u5316\u65f6\u751f\u6210\u4e86\u4e00\u4e2a\u4e34\u65f6\u5bc6\u7801")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ mysql -u root -p\"Md6+l2E?,U#)\"\nmysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '123';\n\nmysqladmin --user=root --password shutdown\n")),(0,l.kt)("h2",{id:"-tpch"},"\ud83e\udd13 TPCH"),(0,l.kt)("p",null,"Debug \u65b9\u4fbf\u7814\u7a76\u6267\u884c\u8ba1\u5212\u4ee5\u53ca\u590d\u6742 SQL \u7684\u5904\u7406\u6d41\u7a0b\uff0c\u76f4\u63a5\u5728 MYSQL \u4e2d\u5229\u7528 TPCH \u5de5\u5177\uff0c\u751f\u6210\u51e0\u5f20\u8868\uff0c\u5229\u7528 TPCH \u63d0\u4f9b\u7684 SQL \u6267\u884c\u7814\u7a76 SQL \u4f18\u5316\u5668\u7b49\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210\u6570\u636e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"./dbgen -s 0.1 ./data\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8868\u7ed3\u6784\u521d\u59cb\u5316")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE TABLE NATION  ( N_NATIONKEY  INTEGER NOT NULL,\n                            N_NAME       CHAR(25) NOT NULL,\n                            N_REGIONKEY  INTEGER NOT NULL,\n                            N_COMMENT    VARCHAR(152));\n\nCREATE TABLE REGION  ( R_REGIONKEY  INTEGER NOT NULL,\n                            R_NAME       CHAR(25) NOT NULL,\n                            R_COMMENT    VARCHAR(152));\n\nCREATE TABLE PART  ( P_PARTKEY     INTEGER NOT NULL,\n                          P_NAME        VARCHAR(55) NOT NULL,\n                          P_MFGR        CHAR(25) NOT NULL,\n                          P_BRAND       CHAR(10) NOT NULL,\n                          P_TYPE        VARCHAR(25) NOT NULL,\n                          P_SIZE        INTEGER NOT NULL,\n                          P_CONTAINER   CHAR(10) NOT NULL,\n                          P_RETAILPRICE DECIMAL(15,2) NOT NULL,\n                          P_COMMENT     VARCHAR(23) NOT NULL );\n\nCREATE TABLE SUPPLIER ( S_SUPPKEY     INTEGER NOT NULL,\n                             S_NAME        CHAR(25) NOT NULL,\n                             S_ADDRESS     VARCHAR(40) NOT NULL,\n                             S_NATIONKEY   INTEGER NOT NULL,\n                             S_PHONE       CHAR(15) NOT NULL,\n                             S_ACCTBAL     DECIMAL(15,2) NOT NULL,\n                             S_COMMENT     VARCHAR(101) NOT NULL);\n\nCREATE TABLE PARTSUPP ( PS_PARTKEY     INTEGER NOT NULL,\n                             PS_SUPPKEY     INTEGER NOT NULL,\n                             PS_AVAILQTY    INTEGER NOT NULL,\n                             PS_SUPPLYCOST  DECIMAL(15,2)  NOT NULL,\n                             PS_COMMENT     VARCHAR(199) NOT NULL );\n\nCREATE TABLE CUSTOMER ( C_CUSTKEY     INTEGER NOT NULL,\n                             C_NAME        VARCHAR(25) NOT NULL,\n                             C_ADDRESS     VARCHAR(40) NOT NULL,\n                             C_NATIONKEY   INTEGER NOT NULL,\n                             C_PHONE       CHAR(15) NOT NULL,\n                             C_ACCTBAL     DECIMAL(15,2)   NOT NULL,\n                             C_MKTSEGMENT  CHAR(10) NOT NULL,\n                             C_COMMENT     VARCHAR(117) NOT NULL);\n\nCREATE TABLE ORDERS  ( O_ORDERKEY       INTEGER NOT NULL,\n                           O_CUSTKEY        INTEGER NOT NULL,\n                           O_ORDERSTATUS    CHAR(1) NOT NULL,\n                           O_TOTALPRICE     DECIMAL(15,2) NOT NULL,\n                           O_ORDERDATE      DATE NOT NULL,\n                           O_ORDERPRIORITY  CHAR(15) NOT NULL,  \n                           O_CLERK          CHAR(15) NOT NULL, \n                           O_SHIPPRIORITY   INTEGER NOT NULL,\n                           O_COMMENT        VARCHAR(79) NOT NULL);\n\nCREATE TABLE LINEITEM ( L_ORDERKEY    INTEGER NOT NULL,\n                             L_PARTKEY     INTEGER NOT NULL,\n                             L_SUPPKEY     INTEGER NOT NULL,\n                             L_LINENUMBER  INTEGER NOT NULL,\n                             L_QUANTITY    DECIMAL(15,2) NOT NULL,\n                             L_EXTENDEDPRICE  DECIMAL(15,2) NOT NULL,\n                             L_DISCOUNT    DECIMAL(15,2) NOT NULL,\n                             L_TAX         DECIMAL(15,2) NOT NULL,\n                             L_RETURNFLAG  CHAR(1) NOT NULL,\n                             L_LINESTATUS  CHAR(1) NOT NULL,\n                             L_SHIPDATE    DATE NOT NULL,\n                             L_COMMITDATE  DATE NOT NULL,\n                             L_RECEIPTDATE DATE NOT NULL,\n                             L_SHIPINSTRUCT CHAR(25) NOT NULL,\n                             L_SHIPMODE     CHAR(10) NOT NULL,\n                             L_COMMENT      VARCHAR(44) NOT NULL);\n\nALTER TABLE REGION ADD PRIMARY KEY (R_REGIONKEY);\nALTER TABLE NATION ADD PRIMARY KEY (N_NATIONKEY);\nALTER TABLE PART ADD PRIMARY KEY (P_PARTKEY);\nALTER TABLE SUPPLIER ADD PRIMARY KEY (S_SUPPKEY);\nALTER TABLE PARTSUPP ADD PRIMARY KEY (PS_PARTKEY,PS_SUPPKEY);\nALTER TABLE CUSTOMER ADD PRIMARY KEY (C_CUSTKEY);\nALTER TABLE CUSTOMER ADD FOREIGN KEY CUSTOMER_FK1 (C_NATIONKEY) references NATION(N_NATIONKEY);\nALTER TABLE LINEITEM ADD PRIMARY KEY (L_ORDERKEY,L_LINENUMBER);\nALTER TABLE ORDERS ADD PRIMARY KEY (O_ORDERKEY);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u52a0\u8f7d\u6570\u636e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"use tpch;\nload data local infile '~/data/codelabs/tpch-dbgen/data/nation.tbl' into table NATION fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/customer.tbl' into table CUSTOMER fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/lineitem.tbl' into table LINEITEM fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/orders.tbl' into table ORDERS fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/partsupp.tbl' into table PARTSUPP fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/part.tbl' into table PART fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/region.tbl' into table REGION fields terminated by '|';\nload data local infile '~/data/codelabs/tpch-dbgen/data/supplier.tbl' into table SUPPLIER fields terminated by '|';\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"SQL \u6267\u884c\u8ba1\u5212")),(0,l.kt)("p",null,"MySQL 8.0 \u65b0\u589e tree \u8f93\u51fa\u6267\u884c\u8ba1\u5212\uff0c\u6613\u4e8e\u67e5\u770b\uff08PG\u4e00\u76f4\u90fd\u662fTree\u8f93\u51fa\u7ed3\u6784\uff09\uff0cMYSQL \u539f\u6765\u7684\u6267\u884c\u8ba1\u5212\u770b\u8d77\u6765\u6bd4\u8f83\u8d39\u52b2\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"- \u5355\u8868\u67e5\u8be2\u8ba1\u5212\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain format=tree select l_returnflag, l_linestatus, sum(l_quantity) as sum_qty, sum(l_extendedprice) as sum_base_price, sum(l_extendedprice * (1 - l_discount)) as sum_disc_price, sum(l_extendedprice * (1 - l_discount) * (1 + l_tax)) as sum_charge, avg(l_quantity) as avg_qty, avg(l_extendedprice) as avg_price, avg(l_discount) as avg_disc, count(*) as count_order from lineitem where l_shipdate <= date '1998-12-01' - interval '1' day group by l_returnflag, l_linestatus order by l_returnflag,\n    -> l_linestatus Limit 10 \\G;\n*************************** 1. row ***************************\nEXPLAIN: -> Limit: 10 row(s)\n    -> Sort: lineitem.L_RETURNFLAG, lineitem.L_LINESTATUS, limit input to 10 row(s) per chunk\n        -> Table scan on <temporary>\n            -> Aggregate using temporary table\n                -> Filter: (lineitem.L_SHIPDATE <= <cache>((DATE'1998-12-01' - interval '1' day)))  (cost=61354 rows=198543)\n                    -> Table scan on lineitem  (cost=61354 rows=595689)\n\n1 row in set (0.01 sec)\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"- \u591a\u8868\u5173\u8054\u8ba1\u5212\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain format=tree select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 100 and p_type like '%aa' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' ) order by s_acctbal desc, n_name, s_name, p_partkey\\G;\n*************************** 1. row ***************************\nEXPLAIN: -> Sort: supplier.S_ACCTBAL DESC, nation.N_NAME, supplier.S_NAME, part.P_PARTKEY\n    -> Stream results  (cost=2402 rows=2.47)\n        -> Nested loop inner join  (cost=2402 rows=2.47)\n            -> Nested loop inner join  (cost=2178 rows=24.7)\n                -> Inner hash join (no condition)  (cost=2039 rows=5.99)\n                    -> Filter: ((part.P_SIZE = 100) and (part.P_TYPE like '%aa'))  (cost=801 rows=216)\n                        -> Table scan on part  (cost=801 rows=19426)\n                    -> Hash\n                        -> Inner hash join (nation.N_REGIONKEY = region.R_REGIONKEY)  (cost=4.25 rows=2.5)\n                            -> Table scan on nation  (cost=1.25 rows=25)\n                            -> Hash\n                                -> Filter: (region.R_NAME = 'jack')  (cost=0.75 rows=1)\n                                    -> Table scan on region  (cost=0.75 rows=5)\n                -> Filter: (partsupp.PS_SUPPLYCOST = (select #2))  (cost=0.252 rows=4.11)\n                    -> Index lookup on partsupp using PRIMARY (PS_PARTKEY=part.P_PARTKEY)  (cost=0.252 rows=4.11)\n                    -> Select #2 (subquery in condition; dependent)\n                        -> Aggregate: min(partsupp.PS_SUPPLYCOST)  (cost=7.42 rows=1)\n                            -> Nested loop inner join  (cost=7.38 rows=0.411)\n                                -> Nested loop inner join  (cost=2.85 rows=4.11)\n                                    -> Nested loop inner join  (cost=1.41 rows=4.11)\n                                        -> Filter: (region.R_NAME = 'jack')  (cost=0.75 rows=1)\n                                            -> Table scan on region  (cost=0.75 rows=5)\n                                        -> Index lookup on partsupp using PRIMARY (PS_PARTKEY=part.P_PARTKEY)  (cost=0.663 rows=4.11)\n                                    -> Single-row index lookup on supplier using PRIMARY (S_SUPPKEY=partsupp.PS_SUPPKEY)  (cost=0.274 rows=1)\n                                -> Filter: (nation.N_REGIONKEY = region.R_REGIONKEY)  (cost=1 rows=0.1)\n                                    -> Single-row index lookup on nation using PRIMARY (N_NATIONKEY=supplier.S_NATIONKEY)  (cost=1 rows=1)\n            -> Filter: (supplier.S_NATIONKEY = nation.N_NATIONKEY)  (cost=0.1 rows=0.1)\n                -> Single-row index lookup on supplier using PRIMARY (S_SUPPKEY=partsupp.PS_SUPPKEY)  (cost=0.1 rows=1)\n\n1 row in set, 1 warning (0.01 sec)\n")),(0,l.kt)("h2",{id:"-gdblldb-\u8c03\u8bd5"},"\ud83d\udc1e GDB/LLDB \u8c03\u8bd5"),(0,l.kt)("p",null,"\u6211\u4f7f\u7528\u7684\u662f MAC \u7cfb\u7edf\uff0c\u4e00\u822c\u90fd\u4f7f\u7528 LLDB \u8fdb\u884c\u8c03\u8bd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ lldb\n(lldb)  breakpoint list\nNo breakpoints currently set.\n\n(lldb) attach 48611\nProcess 48611 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n    frame #0: 0x00007ff80674d09a libsystem_kernel.dylib`poll + 10\nlibsystem_kernel.dylib`poll:\n->  0x7ff80674d09a <+10>: jae    0x7ff80674d0a4            ; <+20>\n    0x7ff80674d09c <+12>: movq   %rax, %rdi\n    0x7ff80674d09f <+15>: jmp    0x7ff806747da9            ; cerror\n    0x7ff80674d0a4 <+20>: retq\nTarget 0: (mysqld) stopped.\nExecutable module set to \"/Users/xujiang/local/dev/mysql/bin/mysqld\".\nArchitecture set to: x86_64h-apple-macosx-.\n\n\n(lldb) p mysql_sysvar_version\n((unnamed struct)) $2 = {\n  flags = 68101\n  name = 0x00007fb14c734160 \"innodb_version\"\n  comment = 0x000000010e19590a \"InnoDB version\"\n  check = 0x0000000109e3f9f0 (mysqld`check_func_str(THD*, SYS_VAR*, void*, st_mysql_value*) at sql_plugin_var.cc:671)\n  update = 0x0000000109e3ffe0 (mysqld`update_func_str(THD*, SYS_VAR*, void*, void const*) at sql_plugin_var.cc:774)\n  value = 0x000000010e67c5a0\n  def_val = 0x000000010d8ec5f7 \"8.1.0\"\n}\n\n(lldb) b mysql_execute_command\n\n(lldb) bt\n* thread #40, name = 'connection', stop reason = breakpoint 1.1\n  * frame #0: 0x0000000109de0b74 mysqld`mysql_execute_command(thd=0x00007fb15c974400, first_level=true) at sql_parse.cc:2990:7\n    frame #1: 0x0000000109dde761 mysqld`dispatch_sql_command(thd=0x00007fb15c974400, parser_state=0x00007000035c8768) at sql_parse.cc:5447:19\n    frame #2: 0x0000000109dd9ce9 mysqld`dispatch_command(thd=0x00007fb15c974400, com_data=0x00007000035c9e38, command=COM_QUERY) at sql_parse.cc:2112:7\n    frame #3: 0x0000000109ddcb76 mysqld`do_command(thd=0x00007fb15c974400) at sql_parse.cc:1459:18\n    frame #4: 0x000000010a14c3b4 mysqld`handle_connection(arg=0x00006000000e5820) at connection_handler_per_thread.cc:303:13\n    frame #5: 0x000000010cae3e04 mysqld`pfs_spawn_thread(arg=0x00007fb15c1214d0) at pfs.cc:3043:3\n    frame #6: 0x00007ff8067834e1 libsystem_pthread.dylib`_pthread_start + 125\n    frame #7: 0x00007ff80677ef6b libsystem_pthread.dylib`thread_start + 15\n\n(lldb) p thd->m_query_string\n(LEX_CSTRING) $3 = (str = \"explain format=tree select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 100 and p_type like '%aa' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' ) order by s_acctbal desc, n_name, s_name, p_partkey\", length = 600)\n\n(lldb) quit\nQuitting LLDB will detach from one or more processes. Do you really want to proceed: [Y/n] y\n")),(0,l.kt)("p",null,"\u5982\u4e0a\uff0cMYSQL \u5ba2\u6237\u7aef\u6267\u884c\u5982\u4e0b SQL\uff0c\u8fdb\u5165 Debug \u72b6\u6001\uff0c\u5229\u7528 LLDB \u547d\u4ee4\u53ef\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u8c03\u8bd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mysql> explain format=tree select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 100 and p_type like '%aa' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'jack' ) order by s_acctbal desc, n_name, s_name, p_partkey\\G;\n")),(0,l.kt)("h2",{id:"-trace-\u6587\u4ef6\u8c03\u8bd5"},"\ud83d\udc1e Trace \u6587\u4ef6\u8c03\u8bd5"),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u4e2d\u8bbe\u7f6e\u53d8\u91cf debug \u4e3a\u4e0d\u540c\u503c\uff0c\u5c31\u53ef\u4ee5\u8f93\u51fa MYSQL \u8fd0\u884c\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u7684\u8c03\u7528\u6a21\u5757\u3001\u51fd\u6570\u3001\u72b6\u6001\u4fe1\u606f\u7b49\u5168\u90e8\u4fe1\u606f\uff0c\u5e76\u8bb0\u5f55\u5230\u672c\u5730\u6587\u4ef6\u4e2d\uff0c\u7528\u6cd5\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql>  SET SESSION debug = 'debug_options';\nQuery OK, 0 rows affected (0.00 sec)\n")),(0,l.kt)("p",null,"\u8be6\u60c5\u53c2\u8003 MYSQL \u5b98\u65b9\u6587\u6863\u53ca\u53c2\u8003\u94fe\u63a5\uff0c\u4ecb\u7ecd\u628aSQL\u6267\u884c\u8fc7\u7a0b Trace \u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff0c\u8fdb\u884c Debug \u6216\u8005\u5b9a\u4f4d\u95ee\u9898\u3002"),(0,l.kt)("h2",{id:"-\u6817\u5b50"},"\ud83d\udcc1 \u6817\u5b50"),(0,l.kt)("p",null,"\u5047\u8bbe\u6211\u4eec\u60f3\u7814\u7a76\u4e00\u4e0b MySql \u5bf9\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"In/=Any/Exists")," \u67e5\u8be2\u6267\u884c\u8ba1\u5212\u4f1a\u5982\u4f55\u6539\u5199\u3002"),(0,l.kt)("h3",{id:"in-\u67e5\u8be2"},"In \u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain format=tree select * from nation where n_regionkey in (select r_regionkey from region)\\G;\n*************************** 1. row ***************************\nEXPLAIN: -> Inner hash join (nation.N_REGIONKEY = region.R_REGIONKEY)  (cost=15 rows=12.5)\n    -> Table scan on nation  (cost=0.25 rows=25)\n    -> Hash\n        -> Covering index scan on region using PRIMARY  (cost=1.5 rows=5)\n\n1 row in set (0.00 sec)\n\n")),(0,l.kt)("h3",{id:"any-\u67e5\u8be2"},(0,l.kt)("inlineCode",{parentName:"h3"},"=Any")," \u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain format=tree select * from nation where n_regionkey = (select distinct\n r_regionkey from region)\\G;\n*************************** 1. row ***************************\nEXPLAIN: -> Filter: (nation.N_REGIONKEY = (select #2))  (cost=1.83 rows=8.33)\n    -> Table scan on nation  (cost=1.83 rows=25)\n    -> Select #2 (subquery in condition; run only once)\n        -> Covering index scan on region using PRIMARY  (cost=1.5 rows=5)\n\n1 row in set (0.00 sec)\n")),(0,l.kt)("h3",{id:"exists-\u67e5\u8be2"},"Exists \u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain format=tree select * from nation where exists (select 1 from region where nation.n_regionkey = region.r_regionkey)\\G;\n*************************** 1. row ***************************\nEXPLAIN: -> Inner hash join (nation.N_REGIONKEY = region.R_REGIONKEY)  (cost=15 rows=12.5)\n    -> Table scan on nation  (cost=0.25 rows=25)\n    -> Hash\n        -> Covering index scan on region using PRIMARY  (cost=1.5 rows=5)\n\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/8.0/en/semijoins.html"},"8.2.2.1 \u4f7f\u7528\u534a\u8fde\u63a5\u8f6c\u6362\u4f18\u5316 IN \u548c EXISTS \u5b50\u67e5\u8be2\u8c13\u8bcd"),"\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u90a3\u4e9b\u573a\u666f\u4e0b\u4f1a\u88ab\u67e5\u8be2\u6539\u5199\uff0c\u90a3\u4e9b\u4e0d\u80fd\u88ab\u67e5\u8be2\u6539\u5199\u3002"),(0,l.kt)("h3",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,l.kt)("p",null,"1=0\uff0c\u4f18\u5316\u540e\u76f4\u63a5\u8fd4\u56de\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> EXPLAIN FORMAT=TREE SELECT * FROM region WHERE 1=0\\G\n*************************** 1. row ***************************\nEXPLAIN: -> Zero rows (Impossible WHERE)  (cost=0..0 rows=0)\n\n1 row in set (0.01 sec)\n\nmysql> EXPLAIN FORMAT=TREE SELECT * FROM region WHERE 1=1 Limit 10\\G\n*************************** 1. row ***************************\nEXPLAIN: -> Limit: 10 row(s)  (cost=1.5 rows=5)\n    -> Table scan on region  (cost=1.5 rows=5)\n\n1 row in set (0.00 sec)\n\nmysql> EXPLAIN FORMAT=TREE SELECT * FROM region WHERE 1=1 and r_name = 'a' and r_comment = 'xxx' Limit 10\\G\n*************************** 1. row ***************************\nEXPLAIN: -> Limit: 10 row(s)  (cost=1.5 rows=1)\n    -> Filter: ((region.R_COMMENT = 'xxx') and (region.R_NAME = 'a'))  (cost=1.5 rows=1)\n        -> Table scan on region  (cost=1.5 rows=5)\n\n1 row in set (0.00 sec)\n\nmysql> EXPLAIN FORMAT=TREE SELECT count(*) FROM region WHERE 1=1 and r_name = 'a' and r_comment = 'xxx'\\G\n*************************** 1. row ***************************\nEXPLAIN: -> Aggregate: count(0)  (cost=1.6 rows=1)\n    -> Filter: ((region.R_COMMENT = 'xxx') and (region.R_NAME = 'a'))  (cost=1.5 rows=1)\n        -> Table scan on region  (cost=1.5 rows=5)\n\n1 row in set (0.01 sec)\n")),(0,l.kt)("h2",{id:"-\u53c2\u8003"},"\ud83d\udcc4 \u53c2\u8003"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.aliyun.com/article/1173843"},"1.\u4ece\u96f6\u5f00\u59cb\u5b66\u4e60MySQL\u8c03\u8bd5\u8ddf\u8e2a(1)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.jianshu.com/p/090e4a055713"},"2.MySQL CentOS7 \u7f16\u8bd1\u73af\u5883\u51c6\u5907"))))}N.isMDXComponent=!0}}]);